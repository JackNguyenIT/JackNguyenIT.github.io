<!DOCTYPE html>
<html>
<head>
  <title>Telegram Login</title>
</head>
<body>
  <h2>Đăng nhập bằng Telegram</h2>

  <!-- Nút login Telegram -->
  <script async src="https://telegram.org/js/telegram-widget.js?22"
    data-telegram-login="Loginbyflutter_bot"   <!-- không có @ -->
    data-size="large"
    data-userpic="true"
    data-request-access="write"
    data-onauth="onTelegramAuth">
  </script>
<script async src="https://telegram.org/js/telegram-widget.js?22" data-telegram-login="Loginbyflutter_bot" data-size="large" data-userpic="false" data-auth-url="https://jacknguyenit.github.io/test_hihi" data-request-access="write"></script>
  <!-- Xử lý kết quả trả về từ Telegram -->
  <script type="text/javascript">
    function onTelegramAuth(user) {
      // user chứa: id, first_name, last_name, username, photo_url, auth_date, hash

      // Gửi dữ liệu về Flutter WebView bằng postMessage (ví dụ)
      const json = JSON.stringify(user);

      // Nếu dùng Flutter WebView (InAppWebView)
      window.flutter_inappwebview.callHandler('onTelegramLogin', json);

      // Hoặc log ra console để kiểm tra
      console.log("User authenticated:", user);
    }
  </script>
</body>
</html>
